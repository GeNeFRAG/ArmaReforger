<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner</title>
    <meta name="title" content="Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner">
    <meta name="description" content="Free ballistic calculator for Arma Reforger. Calculate precise mortar, artillery, and MLRS fire missions with grid coordinates and elevation support.">
    <meta name="author" content="ArmaMortars.org">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://armamortars.org/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://armamortars.org/">
    <meta property="og:title" content="Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner">
    <meta property="og:description" content="Free ballistic calculator for Arma Reforger. Calculate precise mortar, artillery, and MLRS fire missions with grid coordinates and elevation support.">
    <meta property="og:image" content="https://armamortars.org/icon.png">
    <meta property="og:site_name" content="ArmaMortars.org">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://armamortars.org/">
    <meta name="twitter:title" content="Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner">
    <meta name="twitter:description" content="Free ballistic calculator for Arma Reforger. Calculate precise mortar, artillery, and MLRS fire missions with grid coordinates and elevation support.">
    <meta name="twitter:image" content="https://armamortars.org/icon.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#6b8e23">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
   {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Arma Reforger Mortar & Artillery Calculator",
    "alternateName": "Arma Reforger Mortar & Artillery Calculator",
    "description": "Military ballistic calculator for Arma Reforger supporting mortars, howitzers, artillery, and MLRS fire missions with grid coordinates.",
    "applicationCategory": "GameApplication",
    "featureList": [
        "Mortar fire missions",
        "Artillery calculations",
        "MLRS rocket systems",
        "Grid coordinate support",
        "Fire for Effect patterns",
        "Observer corrections"
        ]
    }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        html {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1f1e 0%, #2a3532 100%);
            background-attachment: fixed;
        }
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: transparent;
            color: #e8e8e8;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }
        
        /* Flexbox Layout: main container grows to fill space */
        main {
            display: flex;
            flex-direction: column;
        }
        
        /* CLS Prevention: Reserve space for dynamic content */
        #app {
            position: relative;
            left: 0;
            right: 0;
            width: 100%;
            min-height: 1166px;
        }
        
        #loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 0;
            min-height: 1166px;
            height: 100%;
        }
        
        #rocketSuggestion {
            transform: translateZ(0);
            will-change: transform;
        }
        #rocketSuggestion:not(.cls-hidden) {
            min-height: 60px;
        }
        
        #rangeIndicator:not(.cls-hidden) {
            min-height: 40px;
        }
        
        .result:not(.cls-hidden) {
            min-height: 200px;
        }
        
        #historyPanel:not(.cls-hidden) {
            min-height: 100px;
        }
        
        #ffeContainer:not(.cls-hidden) {
            min-height: 150px;
        }
        
        #fireCorrectionWidget:not(.cls-hidden) {
            min-height: 180px;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #6b8e23;
        }
        .logo {
            width: 80px;
            height: auto;
            filter: brightness(0) invert(1) drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
        }
        h1 {
            color: #c8d4a0;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: 1.8em;
            text-align: center;
        }
        h2 {
            color: #b8c7a0;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 25px;
            margin-bottom: 15px;
            border-left: 4px solid #6b8e23;
            padding-left: 12px;
        }
        .container {
            background: rgba(35, 45, 42, 0.85);
            padding: 25px;
            border-radius: 4px;
            border: 1px solid #3a4a45;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            margin-bottom: 20px;
            width: 100%;
            max-width: 100%;
            position: relative;
            transform: none;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #b8c7a0;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #4a5a52;
            border-radius: 2px;
            font-size: 14px;
            background: #2a3532;
            color: #e8e8e8;
            transition: border-color 0.2s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #6b8e23;
            background: #323e3a;
        }
        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        button {
            background: linear-gradient(180deg, #7a9f35 0%, #6b8e23 100%);
            color: white;
            padding: 14px 30px;
            border: 1px solid #5a7e1f;
            border-radius: 2px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        button:hover {
            background: linear-gradient(180deg, #8ab040 0%, #7a9f35 100%);
            box-shadow: 0 3px 8px rgba(0,0,0,0.4);
        }
        button:active {
            transform: translateY(1px);
        }
        button:disabled {
            background: #4a5550;
            border-color: #3a4540;
            cursor: not-allowed;
            opacity: 0.5;
        }
        .bug-report-btn {
            display: inline-block;
            background: linear-gradient(180deg, #a85050 0%, #903030 100%);
            color: white;
            padding: 8px 16px;
            border: 1px solid #802020;
            border-radius: 2px;
            font-size: 13px;
            font-weight: 600;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .bug-report-btn:hover {
            background: linear-gradient(180deg, #b86060 0%, #a85050 100%);
            box-shadow: 0 3px 6px rgba(0,0,0,0.4);
            transform: translateY(-1px);
        }
        .bug-report-btn:active {
            transform: translateY(0);
        }
        .btn-press {
            transition: all 0.15s ease;
        }
        .btn-press:active {
            transform: scale(0.95);
            box-shadow: 0 0 20px rgba(143, 188, 30, 0.8);
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        .result {
            background: rgba(35, 45, 42, 0.9);
            padding: 20px;
            margin-top: 20px;
            border-radius: 4px;
            visibility: hidden;
            opacity: 0;
            border: 1px solid #3a4a45;
            min-height: 450px;
            transition: opacity 0.2s ease;
        }
        .result.active {
            visibility: visible;
            opacity: 1;
        }
        .result.success {
            background: rgba(35, 45, 42, 0.85);
            border: 2px solid #6b8e23;
        }
        .result.error {
            background: rgba(35, 45, 42, 0.85);
            border: 2px solid #a85050;
        }
        .result h2 {
            margin-top: 0;
            color: #d8e4b0;
        }
        .solution-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        .solution-grid.weapons {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
        .solution-item {
            background: rgba(20, 25, 22, 0.8);
            padding: 14px;
            border-radius: 2px;
            border: 1px solid #4a5a52;
        }
        .solution-item strong {
            display: block;
            color: #a8b898;
            font-size: 11px;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .solution-item .value {
            font-size: 22px;
            color: #e8f4d0;
            font-weight: bold;
        }
        .solution-item.weapon-mortar {
            border-left: 3px solid #8fbc1e;
        }
        .solution-item.weapon-howitzer {
            border-left: 3px solid #d4a06b;
        }
        .solution-item.weapon-mlrs {
            border-left: 3px solid #d46b6b;
        }
        .solution-item .weapon-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .solution-item.weapon-mortar .weapon-title {
            color: #8fbc1e;
        }
        .solution-item.weapon-howitzer .weapon-title {
            color: #d4a06b;
        }
        .solution-item.weapon-mlrs .weapon-title {
            color: #d46b6b;
        }
        .solution-item .weapon-list {
            color: #d8e8c8;
            font-size: 12px;
            line-height: 1.5;
        }
        .weapon-list a {
            color: #a8d8f0;
            text-decoration: none;
            transition: color 0.2s;
        }
        .weapon-list a:hover {
            color: #c8f0ff;
            text-decoration: underline;
        }
        .info {
            background: rgba(60, 80, 95, 0.3);
            border: 1px solid #4a6a75;
            padding: 12px;
            border-radius: 2px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #b8c8d0;
        }
        #loading {
            text-align: center;
            padding: 40px 20px;
            color: #95a585;
            font-size: 16px;
        }
        .toggle-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(107, 142, 35, 0.1);
            border-radius: 8px;
            width: 100%;
            max-width: 100%;
        }
        .toggle-buttons {
            display: flex;
            gap: 10px;
        }
        .toggle-option {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 14px;
            flex: 1;
            text-align: center;
            white-space: nowrap;
        }
        .toggle-option.active {
            background: #6b8e23;
            border-color: #8fbc1e;
            box-shadow: 0 2px 8px rgba(107, 142, 35, 0.4);
        }
        .toggle-option:hover:not(.active) {
            background: rgba(255, 255, 255, 0.15);
        }
        .coord-mode {
            display: none;
        }
        .coord-mode.active {
            display: block;
        }
        .history-panel {
            background: rgba(35, 45, 42, 0.85);
            padding: 20px;
            border-radius: 4px;
            border: 1px solid #3a4a45;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
            width: 100%;
            max-width: 100%;
            transition: opacity 0.2s ease, height 0.2s ease;
        }
        .history-panel.cls-hidden {
            opacity: 0;
            height: 0 !important;
            min-height: 0 !important;
            max-height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            border: 0 !important;
            pointer-events: none;
            overflow: hidden;
        }
        .history-item {
            background: rgba(20, 25, 22, 0.8);
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 2px;
            border: 1px solid #4a5a52;
            cursor: pointer;
            transition: all 0.2s;
        }
        .history-item:hover {
            background: rgba(30, 35, 32, 0.9);
            border-color: #6b8e23;
        }
        .history-item.active {
            border: 2px solid #6b8e23;
            background: rgba(40, 55, 45, 0.9);
        }
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        .history-title {
            color: #c8d4a0;
            font-weight: 600;
            font-size: 13px;
        }
        .history-time {
            color: #95a585;
            font-size: 11px;
        }
        .history-details {
            color: #b8c8d0;
            font-size: 12px;
            margin-top: 5px;
        }
        .history-delete {
            background: transparent;
            border: none;
            color: #a85050;
            cursor: pointer;
            padding: 4px 8px;
            font-size: 16px;
            margin: 0;
            width: auto;
            transition: all 0.2s;
        }
        .history-delete:hover {
            color: #ff6b6b;
            transform: scale(1.2);
        }
        .clear-history-btn {
            background: linear-gradient(180deg, #a85050 0%, #984040 100%);
            border-color: #883030;
            padding: 8px 16px;
            font-size: 12px;
            margin-top: 10px;
        }
        .observer-label {
            display: block;
            color: #95a585;
            font-size: 11px;
            margin-bottom: 3px;
        }
        .observer-input {
            width: 100%;
            padding: 6px;
            background: rgba(20, 25, 22, 0.8);
            border: 1px solid #4a5a52;
            border-radius: 3px;
            color: #c8d4a0;
            font-size: 12px;
        }
        .observer-input-grid {
            font-family: monospace;
        }
        #ffeContainer {
            transition: opacity 0.2s ease, height 0.2s ease;
            overflow: hidden;
        }
        #ffeContainer.cls-hidden {
            opacity: 0;
            height: 0 !important;
            min-height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            border: 0 !important;
            pointer-events: none;
        }
        
        #fireCorrectionWidget {
            transition: opacity 0.2s ease, height 0.2s ease;
            overflow: hidden;
        }
        #fireCorrectionWidget.cls-hidden {
            opacity: 0;
            height: 0 !important;
            min-height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            border: 0 !important;
            pointer-events: none;
        }
        
        .cls-hidden {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            min-height: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            border: 0 !important;
            overflow: hidden !important;
            pointer-events: none !important;
        }
        
        #rocketSuggestion {
            display: none;
            position: relative;
            z-index: 10;
            min-height: auto;
        }
        #rocketSuggestion.show {
            display: block !important;
            -webkit-animation: slideDown 0.3s ease;
            animation: slideDown 0.3s ease;
            visibility: visible !important;
            opacity: 1 !important;
        }
        #rocketSuggestion[style*="display: block"] {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        @media (max-width: 600px) {
            .row {
                grid-template-columns: 1fr;
            }
            .solution-grid {
                grid-template-columns: 1fr;
            }
            #rocketSuggestion {
                margin-top: 15px !important;
                margin-bottom: 15px !important;
                padding: 12px !important;
            }
            #rocketSuggestion > div {
                flex-direction: column !important;
                gap: 12px !important;
                align-items: stretch !important;
            }
            #rocketSuggestion .suggestion-buttons {
                width: 100%;
                flex-direction: row !important;
                justify-content: stretch !important;
            }
            #rocketSuggestion .suggestion-buttons button {
                flex: 1;
                padding: 10px 15px !important;
                font-size: 12px !important;
            }
        }
    </style>
</head>
<body>
    <!-- Main Header -->
    <header class="header">
        <img src="arma-reforger-logo.png" alt="Arma Reforger Logo - Mortar & Artillery Calculator" class="logo" width="80" height="80">
        <h1>Arma Reforger Mortar & Artillery Calculator</h1>
    </header>
    
    <!-- Main Content -->
    <main>
    <div id="loading" role="status" aria-live="polite">Loading ballistic data...</div>
    
    <div id="app" style="display: none;">
        <!-- Supported Weapon Systems -->
        <div class="container">
            <h2 style="margin-top: 0;">üéØ Supported Weapon Systems</h2>
            <div class="solution-grid weapons">
                <div class="solution-item weapon-mortar">
                    <div class="weapon-title">üí£ MORTARS</div>
                    <div class="weapon-list">
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/M252_mortar" target="_blank" rel="noopener">US M252 (81mm)</a><br>
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/2B14_Podnos" target="_blank" rel="noopener">Soviet 2B14 (82mm)</a>
                    </div>
                </div>
                <div class="solution-item weapon-howitzer">
                    <div class="weapon-title">üî´ HOWITZERS</div>
                    <div class="weapon-list">
                         ‚Ä¢ <a href="https://en.wikipedia.org/wiki/M119_howitzer" target="_blank" rel="noopener">US M119 (105mm)</a><br>
                         ‚Ä¢ <a href="https://en.wikipedia.org/wiki/122_mm_howitzer_2A18_(D-30)" target="_blank" rel="noopener">Soviet D-30 (122mm)</a>
                    </div>
                </div>
                <div class="solution-item weapon-mlrs">
                    <div class="weapon-title">üöÄ MLRS</div>
                    <div class="weapon-list">
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/BM-21_Grad" target="_blank" rel="noopener">BM-21 Grad (122mm)</a><br>
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/Type_63_multiple_rocket_launcher" target="_blank" rel="noopener">Type-63 (107mm)</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- History Panel -->
        <div id="historyPanel" class="history-panel cls-hidden">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin: 0;">üìú Mission History</h2>
                <button class="clear-history-btn" id="clearHistoryBtn">Clear All</button>
            </div>
            <div id="historyList"></div>
        </div>
        
        <div class="toggle-container">
            <span style="font-weight: 500; color: #b8c7a0; text-align: center;">Coordinate Input:</span>
            <div class="toggle-buttons">
                <div class="toggle-option active" id="toggleGrid" data-mode="grid">
                    üéØ Grid (047/069)
                </div>
                <div class="toggle-option" id="toggleMeters" data-mode="meters">
                    üìè Meters (X/Y)
                </div>
            </div>
        </div>
        
        <div class="container">
            <h2>1Ô∏è‚É£ Weapon System and Ammunition</h2>
            
            <div class="row">
                <div class="form-group">
                    <label for="mortarType">Weapon System Type</label>
                    <select id="mortarType">
                        <!-- Populated dynamically from ballistic-data.json -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="shellType">Ammunition Type</label>
                    <select id="shellType">
                        <!-- Populated dynamically from ballistic-data.json -->
                    </select>
                </div>
            </div>
            
            <h2>2Ô∏è‚É£ Weapon Position</h2>
                
                <!-- Grid Mode -->
                <div id="mortarGridMode" class="coord-mode active">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="mortarGridX">Grid X Coordinate</label>
                                <input type="text" id="mortarGridX" placeholder="047 or 0475" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                            <div class="form-group">
                                <label for="mortarGridY">Grid Y Coordinate</label>
                                <input type="text" id="mortarGridY" placeholder="069 or 0695" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                        </div>
                        <small style="color: #999; display: block; margin-top: -15px;">3-digit (100m squares) or 4-digit (10m precision)</small>
                    </div>
                </div>
                
                <!-- Meters Mode -->
                <div id="mortarMetersMode" class="coord-mode">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="mortarX">X Coordinate (meters)</label>
                                <input type="number" id="mortarX" placeholder="4800" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                            <div class="form-group">
                                <label for="mortarY">Y Coordinate (meters)</label>
                                <input type="number" id="mortarY" placeholder="7049" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                        </div>
                        <small style="color: #999; display: block; margin-top: -15px;">Map coordinates in meters (e.g., 4800.5, 7049.0)</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="mortarZ">Height (m ASL)</label>
                    <input type="number" id="mortarZ" placeholder="168" step="0.1" min="-1000" max="9999" inputmode="decimal">
                </div>
                
                <h2>3Ô∏è‚É£ Target Position</h2>
                
                <!-- Grid Mode -->
                <div id="targetGridMode" class="coord-mode active">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="targetGridX">Grid X Coordinate</label>
                                <input type="text" id="targetGridX" placeholder="085 or 0850" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                            <div class="form-group">
                                <label for="targetGridY">Grid Y Coordinate</label>
                                <input type="text" id="targetGridY" placeholder="105 or 1050" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                        </div>
                        <small style="color: #999; display: block; margin-top: -15px;">3-digit (100m squares) or 4-digit (10m precision)</small>
                    </div>
                </div>
                
                <!-- Meters Mode -->
                <div id="targetMetersMode" class="coord-mode">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="targetX">X Coordinate (meters)</label>
                                <input type="number" id="targetX" placeholder="4696" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                            <div class="form-group">
                                <label for="targetY">Y Coordinate (meters)</label>
                                <input type="number" id="targetY" placeholder="5516" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                        </div>
                        <small style="color: #999; display: block; margin-top: -15px;">Map coordinates in meters (e.g., 4696.0, 5516.0)</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="targetZ">Height (m ASL)</label>
                    <input type="number" id="targetZ" placeholder="64" step="0.1" min="-1000" max="9999" inputmode="decimal">
                </div>
                
            <div class="form-group">
                <label for="missionLabel">Mission Label (Optional)</label>
                <input type="text" id="missionLabel" placeholder="e.g., TRP 1, TGT AA1234, HILL 201" maxlength="20">
            </div>
            
            <!-- Range Indicator (pre-rendered to prevent CLS) -->
            <div id="rangeIndicator" class="cls-hidden" style="margin: 10px 0; padding: 8px 12px; border-radius: 4px; font-size: 12px; font-weight: 600; text-align: center;"></div>
            
            <!-- Rocket Selection Suggestion Banner -->
            <div id="rocketSuggestion" class="cls-hidden" style="margin-top: 10px; padding: 10px; background: linear-gradient(135deg, rgba(143, 188, 30, 0.15) 0%, rgba(107, 142, 35, 0.15) 100%); border: 1px solid rgba(143, 188, 30, 0.4); border-radius: 4px;">
                <div style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                    <div style="flex: 1;">
                        <div id="suggestionTitle" style="color: #8fbc1e; font-size: 12px; font-weight: 600; margin-bottom: 3px;">üí° Recommendation</div>
                        <div id="suggestionText" style="color: #c8d4a0; font-size: 11px;"></div>
                    </div>
                    <div class="suggestion-buttons" style="display: flex; gap: 6px;">
                        <button type="button" id="acceptSuggestion" class="btn-press" style="padding: 8px 12px; background: linear-gradient(180deg, #8fbc1e 0%, #7aaa1a 100%); border: 1px solid #9fcc2e; border-radius: 3px; color: white; font-weight: 600; cursor: pointer; font-size: 11px; white-space: nowrap; margin: 0; width: auto;">
                            Use This
                        </button>
                        <button type="button" id="dismissSuggestion" style="padding: 8px 12px; background: rgba(100, 100, 100, 0.3); border: 1px solid rgba(150, 150, 150, 0.4); border-radius: 3px; color: #aaa; font-weight: 600; cursor: pointer; font-size: 11px; white-space: nowrap; margin: 0; width: auto;">
                            Dismiss
                        </button>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button id="calculate" class="btn-press" style="flex: 3;">Compute Fire Mission</button>
                <button id="reset" class="btn-press" style="flex: 1; background: linear-gradient(180deg, #666 0%, #555 100%);">Reset</button>
            </div>
        </div>
        
        <div id="output" class="result"></div>
        
        <!-- Fire for Effect Container -->
        <div id="ffeContainer" class="cls-hidden" style="background: linear-gradient(135deg, rgba(55, 45, 70, 0.95) 0%, rgba(45, 35, 60, 0.95) 100%); padding: 15px; border-radius: 4px; margin-top: 10px; border: 1px solid rgba(143, 105, 188, 0.3);">
            <!-- FFE Mode Toggle -->
            <div id="ffeToggleContainer" style="margin-bottom: 15px;">
                <label style="display: flex; align-items: center; cursor: pointer; color: #d4c8e0; font-size: 13px; font-weight: 600;">
                    <input type="checkbox" id="ffeEnabled" style="margin-right: 8px; width: 16px; height: 16px; cursor: pointer;">
                    <span>üí• Enable Fire for Effect Pattern</span>
                </label>
            </div>
            
            <!-- Fire for Effect Widget (Dynamic) -->
            <div id="ffeWidget" style="display: none;">
                <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #d4c8e0;">üí• Fire for Effect Pattern</h3>
                
                <div class="info" style="margin-bottom: 12px; background: rgba(60, 50, 80, 0.4); border-color: rgba(143, 105, 188, 0.3);">
                    üéØ Generate multi-round salvo patterns. <strong>Lateral sheaf</strong> for width coverage, <strong>linear sheaf</strong> for depth penetration, <strong>circular pattern</strong> for 360¬∞ saturation.
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                    <div>
                        <label style="display: block; color: #c8b8d8; font-size: 13px; margin-bottom: 5px; font-weight: 600;">Sheaf Type</label>
                        <select id="ffePattern" style="width: 100%; padding: 8px; background: rgba(20, 15, 25, 0.8); border: 1px solid #5a4a62; border-radius: 3px; color: #d4c8e0; font-size: 13px;">
                            <option value="perpendicular">Lateral Sheaf (Width)</option>
                            <option value="along-bearing">Linear Sheaf (Depth)</option>
                            <option value="circular">Circular Pattern</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; color: #c8b8d8; font-size: 13px; margin-bottom: 5px; font-weight: 600;">Rounds per Salvo</label>
                        <select id="ffeRounds" style="width: 100%; padding: 8px; background: rgba(20, 15, 25, 0.8); border: 1px solid #5a4a62; border-radius: 3px; color: #d4c8e0; font-size: 13px;">
                            <option value="3">3 Rounds</option>
                            <option value="4">4 Rounds</option>
                            <option value="5" selected>5 Rounds</option>
                            <option value="6">6 Rounds</option>
                            <option value="7">7 Rounds</option>
                            <option value="8">8 Rounds</option>
                            <option value="9">9 Rounds</option>
                            <option value="10">10 Rounds</option>
                            <option value="11">11 Rounds</option>
                            <option value="12">12 Rounds</option>
                        </select>
                    </div>
                </div>
                
                <div id="ffeSpacingGroup" style="margin-bottom: 10px;">
                    <label style="display: block; color: #c8b8d8; font-size: 13px; margin-bottom: 5px; font-weight: 600;">Round Interval (meters)</label>
                    <input type="number" id="ffeSpacing" placeholder="50" value="50" min="10" max="500" step="10" style="width: 100%; padding: 8px; background: rgba(20, 15, 25, 0.8); border: 1px solid #5a4a62; border-radius: 3px; color: #d4c8e0; font-size: 13px;">
                    <small style="color: #a89fb8; display: block; margin-top: 3px; font-size: 11px;">Spacing between impact points (10-500m)</small>
                </div>
                
                <div id="ffeRadiusGroup" style="display: none; margin-bottom: 10px;">
                    <label style="display: block; color: #c8b8d8; font-size: 13px; margin-bottom: 5px; font-weight: 600;">Circle Radius (meters)</label>
                    <input type="number" id="ffeRadius" placeholder="100" value="100" min="20" max="500" step="10" style="width: 100%; padding: 8px; background: rgba(20, 15, 25, 0.8); border: 1px solid #5a4a62; border-radius: 3px; color: #d4c8e0; font-size: 13px;">
                    <small style="color: #a89fb8; display: block; margin-top: 3px; font-size: 11px;">Distance from center to impact points (20-500m)</small>
                </div>
                
                <button id="generateFFE" class="btn-press" style="width: 100%; padding: 10px; margin-top: 5px; background: linear-gradient(180deg, #8f69bc 0%, #7a58a8 100%); border: 1px solid #9f79cc; border-radius: 4px; color: white; font-weight: 600; cursor: pointer; font-size: 13px;">
                    Generate FFE Pattern
                </button>
                
                <button id="showBaseSolution" class="btn-press" style="display: none; width: 100%; padding: 10px; margin-top: 10px; background: linear-gradient(180deg, #666 0%, #555 100%); border: 1px solid #777; border-radius: 4px; color: white; font-weight: 600; cursor: pointer; font-size: 13px;">
                    ‚Üê Show Base Solution
                </button>
            </div>
        </div>
        
        <!-- Fire Correction Widget (Static) -->
        <div id="fireCorrectionWidget" class="cls-hidden" style="background: linear-gradient(135deg, rgba(40, 55, 45, 0.95) 0%, rgba(30, 45, 35, 0.95) 100%); padding: 15px; border-radius: 4px; margin-top: 10px; border: 1px solid rgba(107, 142, 35, 0.3);">
            <h3 id="fireCorrectionHeader" style="margin: 0 0 10px 0; font-size: 16px; color: #c8d4a0;">üîÑ Adjust Fire: Gun-Target (GT) line</h3>
            <div>
                
                <!-- FO Mode Toggle -->
                <div style="margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; color: #a8b898; font-size: 13px; cursor: pointer;">
                        <input type="checkbox" id="foEnabled" style="margin-right: 8px; width: auto; height: auto;">
                        <span id="foToggleLabel">üî≠ Use Observer-Target (OT) line</span>
                    </div>
                </div>
                
                <!-- Observer Position Inputs -->
                <div id="foControls" style="display: none; margin-bottom: 12px; padding: 10px; background: rgba(15, 20, 17, 0.9); border-radius: 3px; border: 1px solid #2a3532;">
                    <div id="observerGridMode" class="coord-mode">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;">
                            <div>
                                <label class="observer-label">FO Grid X</label>
                                <input type="text" id="observerGridX" placeholder="060" maxlength="4" inputmode="numeric" pattern="[0-9]*" class="observer-input observer-input-grid" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                            <div>
                                <label class="observer-label">FO Grid Y</label>
                                <input type="text" id="observerGridY" placeholder="080" maxlength="4" inputmode="numeric" pattern="[0-9]*" class="observer-input observer-input-grid" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                        </div>
                    </div>
                    
                    <div id="observerMetersMode" class="coord-mode">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;">
                            <div>
                                <label class="observer-label">FO X (meters)</label>
                                <input type="number" id="observerX" placeholder="6000" step="0.1" min="0" max="99999.9" class="observer-input" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                            <div>
                                <label class="observer-label">FO Y (meters)</label>
                                <input type="number" id="observerY" placeholder="8000" step="0.1" min="0" max="99999.9" class="observer-input" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                        </div>
                    </div>
                    
                    <div id="otBearingDisplay" style="margin-top: 8px; padding: 6px; background: rgba(40, 55, 45, 0.8); border-radius: 3px; display: none;">
                        <div style="color: #8fbc1e; font-size: 11px;">
                            üß≠ <strong>OT:</strong> <span id="otBearingValue">-</span>¬∞ | <strong>GT:</strong> <span id="gtBearingValue">-</span>¬∞ | <strong>Œî:</strong> <span id="angleDiffValue">-</span>¬∞
                        </div>
                    </div>
                    <div id="observerWarning" style="margin-top: 8px; padding: 6px; background: rgba(168, 80, 80, 0.2); border: 1px solid #a85050; border-radius: 3px; display: none;">
                        <div style="color: #ff6b6b; font-size: 11px;">
                            ‚ö†Ô∏è Please enter observer coordinates to use OT mode
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                    <div>
                        <label style="display: block; color: #a8b898; font-size: 13px; margin-bottom: 5px; font-weight: 600;">Left/Right (meters)</label>
                        <input type="text" inputmode="text" id="correctionLR" data-min="-500" data-max="500" onkeydown="if(event.key === 'Enter') event.preventDefault();" oninput="this.value = this.value.replace(/[^0-9\-+]/g, '').replace(/(?!^)[\-+]/g, '');" style="width: 100%; padding: 8px; background: rgba(20, 25, 22, 0.8); border: 1px solid #4a5a52; border-radius: 3px; color: #c8d4a0; font-size: 13px;">
                        <small style="color: #999; display: block; margin-top: 3px; font-size: 11px;">Right: +, Left: ‚àí (Range: -500 to +500m)</small>
                    </div>
                    <div>
                        <label style="display: block; color: #a8b898; font-size: 13px; margin-bottom: 5px; font-weight: 600;">Add/Drop (meters)</label>
                        <input type="text" inputmode="text" id="correctionAD" data-min="-500" data-max="500" onkeydown="if(event.key === 'Enter') event.preventDefault();" oninput="this.value = this.value.replace(/[^0-9\-+]/g, '').replace(/(?!^)[\-+]/g, '');" style="width: 100%; padding: 8px; background: rgba(20, 25, 22, 0.8); border: 1px solid #4a5a52; border-radius: 3px; color: #c8d4a0; font-size: 13px;">
                        <small style="color: #999; display: block; margin-top: 3px; font-size: 11px;">Add: +, Drop: ‚àí (Range: -500 to +500m)</small>
                    </div>
                </div>
                <button id="applyCorrection" disabled style="width: 100%; padding: 10px; margin-top: 5px; background: linear-gradient(180deg, #555 0%, #444 100%); border: 1px solid #8fbc1e; border-radius: 4px; color: white; font-weight: 600; cursor: not-allowed; font-size: 13px; transition: all 0.15s ease; opacity: 0.5;">
                    Apply Fire Correction
                </button>
                <button id="undoCorrection" class="btn-press" style="display: none; width: 100%; padding: 10px; margin-top: 10px; background: linear-gradient(180deg, #d94a4a 0%, #c93a3a 100%); border: 1px solid #ff6b6b; border-radius: 4px; color: white; font-weight: 600; cursor: pointer; font-size: 13px;">
                    ‚Ü∂ Undo Correction - Restore Original Target
                </button>
            </div>
        </div>
    </div>
    
    </main>
    
    <!-- Footer - Outside main and app containers to ensure visibility at all times -->
    <footer style="text-align: center; padding: 20px; margin-top: 20px; color: #95a585; font-size: 12px; border-top: 1px solid #3a4a45;">
        <p style="margin: 15px 0;">
            <a href="https://github.com/GeNeFRAG/ArmaReforger/issues/new?labels=bug&title=%5BBUG%5D%20&body=%23%23%20What%27s%20broken%3F%0A%0A%0A%23%23%20How%20did%20it%20happen%3F%0A1.%20%0A2.%20%0A3.%20%0A%0A%23%23%20What%20weapon%2Fmap%20were%20you%20using%3F%0A" 
               target="_blank" 
               rel="noopener noreferrer" 
               class="bug-report-btn">
                üêõ Report Bug
            </a>
        </p>
        <p style="margin: 10px 0;">¬© 2026 ArmaMortars.org | OpenSource Arma Reforger Ballistic Calculator v2.6.4</p>
        <p style="margin: 10px 0;">
            <a href="https://github.com/GeNeFRAG/ArmaReforger/tree/main/mortar_core/" target="_blank" rel="noopener noreferrer" style="color: #8fbc1e; text-decoration: none;">‚≠ê View on GitHub</a>
            | 
            <a href="https://github.com/GeNeFRAG/ArmaReforger/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" style="color: #8fbc1e; text-decoration: none;">üìÑ MIT License</a>
        </p>
        <p style="margin: 10px 0;">
            <a href="http://discord.gg/Gb8Nt92J3m" target="_blank" rel="noopener noreferrer" style="color: #8fbc1e; text-decoration: none; display: inline-flex; align-items: center; gap: 5px;"><img src="FIST_Discord.webp" alt="F.I.S.T Discord" width="16" height="16" style="height: 16px; width: 16px; vertical-align: middle; display: inline-block;">F.I.S.T Discord</a>
        </p>
    </footer>
    
    <script src="BallisticCalculator.js?v=2.6.4"></script>
    <script type="module" src="ui_js/main.js"></script>
</body>
</html>
