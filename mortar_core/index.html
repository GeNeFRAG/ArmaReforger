<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner</title>
    <meta name="title" content="Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner">
    <meta name="description" content="Free ballistic calculator for Arma Reforger. Calculate precise mortar, artillery, and MLRS fire missions with grid coordinates and elevation support.">
    <meta name="author" content="ArmaMortars.org">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://armamortars.org/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://armamortars.org/">
    <meta property="og:title" content="Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner">
    <meta property="og:description" content="Free ballistic calculator for Arma Reforger. Calculate precise mortar, artillery, and MLRS fire missions with grid coordinates and elevation support.">
    <meta property="og:image" content="https://armamortars.org/icon.png">
    <meta property="og:site_name" content="ArmaMortars.org">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://armamortars.org/">
    <meta name="twitter:title" content="Arma Reforger Mortar & Artillery Calculator | Fire Mission Planner">
    <meta name="twitter:description" content="Free ballistic calculator for Arma Reforger. Calculate precise mortar, artillery, and MLRS fire missions with grid coordinates and elevation support.">
    <meta name="twitter:image" content="https://armamortars.org/icon.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    
    <!-- Preload critical resources for LCP -->
    <link rel="preload" as="image" href="arma-reforger-logo.png" fetchpriority="high">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#6b8e23">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
   {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Arma Reforger Mortar & Artillery Calculator",
    "alternateName": "Arma Reforger Mortar & Artillery Calculator",
    "description": "Military ballistic calculator for Arma Reforger supporting mortars, howitzers, artillery, and MLRS fire missions with grid coordinates.",
    "applicationCategory": "GameApplication",
    "featureList": [
        "Mortar fire missions",
        "Artillery calculations",
        "MLRS rocket systems",
        "Grid coordinate support",
        "Fire for Effect patterns",
        "Observer corrections"
        ]
    }
    </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Header -->
    <header class="header">
        <img src="arma-reforger-logo.png" alt="Arma Reforger Logo - Mortar & Artillery Calculator" class="logo" width="80" height="80" fetchpriority="high">
        <h1>Arma Reforger Mortar & Artillery Calculator</h1>
    </header>
    
    <!-- New Feature Banner -->
    <div class="feature-banner">
        <div class="feature-banner-inner">
            <div class="feature-banner-icon">üîó</div>
            <div class="feature-banner-content">
                <div class="feature-banner-title">‚ú® New Feature: Session Sharing</div>
                <div class="feature-banner-text">Share fire missions with your squad! Click the <strong>üîó Share</strong> button to generate a shareable link or paste a link to import mission data instantly.</div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <main>
    <div id="loading" role="status" aria-live="polite">Loading ballistic data...</div>
    
    <div id="app" class="cls-hidden">
        <!-- Supported Weapon Systems -->
        <div class="container">
            <h2 class="no-margin-top">üéØ Supported Weapon Systems</h2>
            <div class="solution-grid weapons">
                <div class="solution-item weapon-mortar">
                    <div class="weapon-title">üí£ MORTARS</div>
                    <div class="weapon-list">
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/M252_mortar" target="_blank" rel="noopener">US M252 (81mm)</a><br>
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/2B14_Podnos" target="_blank" rel="noopener">Soviet 2B14 (82mm)</a>
                    </div>
                </div>
                <div class="solution-item weapon-howitzer">
                    <div class="weapon-title">üî´ HOWITZERS</div>
                    <div class="weapon-list">
                         ‚Ä¢ <a href="https://en.wikipedia.org/wiki/M119_howitzer" target="_blank" rel="noopener">US M119 (105mm)</a><br>
                         ‚Ä¢ <a href="https://en.wikipedia.org/wiki/122_mm_howitzer_2A18_(D-30)" target="_blank" rel="noopener">Soviet D-30 (122mm)</a>
                    </div>
                </div>
                <div class="solution-item weapon-mlrs">
                    <div class="weapon-title">üöÄ MLRS</div>
                    <div class="weapon-list">
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/BM-21_Grad" target="_blank" rel="noopener">BM-21 Grad (122mm)</a><br>
                        ‚Ä¢ <a href="https://en.wikipedia.org/wiki/Type_63_multiple_rocket_launcher" target="_blank" rel="noopener">Type-63 (107mm)</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- History Panel -->
        <div id="historyPanel" class="history-panel cls-hidden">
            <div class="history-header-flex">
                <h2 class="no-margin">üìú Mission History</h2>
                <button class="clear-history-btn" id="clearHistoryBtn">Clear All</button>
            </div>
            <div id="historyList"></div>
        </div>
        
        <div class="toggle-container">
            <span class="toggle-label">Coordinate Input:</span>
            <div class="toggle-buttons">
                <div class="toggle-option active" id="toggleGrid" data-mode="grid">
                    üéØ Grid (047/069)
                </div>
                <div class="toggle-option" id="toggleMeters" data-mode="meters">
                    üìè Meters (X/Y)
                </div>
            </div>
        </div>
        
        <div class="container">
            <h2>1Ô∏è‚É£ Weapon System and Ammunition</h2>
            
            <div class="row">
                <div class="form-group">
                    <label for="mortarType">Weapon System Type</label>
                    <select id="mortarType">
                        <!-- Populated dynamically from ballistic-data.json -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="shellType">Ammunition Type</label>
                    <select id="shellType">
                        <!-- Populated dynamically from ballistic-data.json -->
                    </select>
                </div>
            </div>
            
            <h2>2Ô∏è‚É£ Weapon Position</h2>
                
                <!-- Grid Mode -->
                <div id="mortarGridMode" class="coord-mode active">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="mortarGridX">Grid X Coordinate</label>
                                <input type="text" id="mortarGridX" placeholder="047 or 0475" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                            <div class="form-group">
                                <label for="mortarGridY">Grid Y Coordinate</label>
                                <input type="text" id="mortarGridY" placeholder="069 or 0695" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                        </div>
                        <small class="coord-hint">3-digit (100m squares) or 4-digit (10m precision)</small>
                    </div>
                </div>
                
                <!-- Meters Mode -->
                <div id="mortarMetersMode" class="coord-mode">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="mortarX">X Coordinate (meters)</label>
                                <input type="number" id="mortarX" placeholder="4800" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                            <div class="form-group">
                                <label for="mortarY">Y Coordinate (meters)</label>
                                <input type="number" id="mortarY" placeholder="7049" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                        </div>
                        <small class="coord-hint">Map coordinates in meters (e.g., 4800.5, 7049.0)</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="mortarZ">Height (m ASL)</label>
                    <input type="number" id="mortarZ" placeholder="168" step="0.1" min="-1000" max="9999" inputmode="decimal">
                </div>
                
                <h2>3Ô∏è‚É£ Target Position</h2>
                
                <!-- Grid Mode -->
                <div id="targetGridMode" class="coord-mode active">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="targetGridX">Grid X Coordinate</label>
                                <input type="text" id="targetGridX" placeholder="085 or 0850" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                            <div class="form-group">
                                <label for="targetGridY">Grid Y Coordinate</label>
                                <input type="text" id="targetGridY" placeholder="105 or 1050" maxlength="4" inputmode="numeric" pattern="[0-9]*">
                            </div>
                        </div>
                        <small class="coord-hint">3-digit (100m squares) or 4-digit (10m precision)</small>
                    </div>
                </div>
                
                <!-- Meters Mode -->
                <div id="targetMetersMode" class="coord-mode">
                    <div class="form-group">
                        <div class="row">
                            <div class="form-group">
                                <label for="targetX">X Coordinate (meters)</label>
                                <input type="number" id="targetX" placeholder="4696" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                            <div class="form-group">
                                <label for="targetY">Y Coordinate (meters)</label>
                                <input type="number" id="targetY" placeholder="5516" step="0.1" min="0" max="99999.9" inputmode="decimal">
                            </div>
                        </div>
                        <small class="coord-hint">Map coordinates in meters (e.g., 4696.0, 5516.0)</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="targetZ">Height (m ASL)</label>
                    <input type="number" id="targetZ" placeholder="64" step="0.1" min="-1000" max="9999" inputmode="decimal">
                </div>
                
            <div class="form-group">
                <label for="missionLabel">Mission Label (Optional)</label>
                <input type="text" id="missionLabel" placeholder="e.g., TRP 1, TGT AA1234, HILL 201" maxlength="20">
            </div>
            
            <!-- Range Indicator (pre-rendered to prevent CLS) -->
            <div id="rangeIndicator" class="range-indicator cls-hidden"></div>
            
            <!-- Rocket Selection Suggestion Banner -->
            <div id="rocketSuggestion" class="suggestion-banner cls-hidden">
                <div class="suggestion-inner">
                    <div class="suggestion-content">
                        <div id="suggestionTitle" class="suggestion-title">üí° Recommendation</div>
                        <div id="suggestionText" class="suggestion-text"></div>
                    </div>
                    <div class="suggestion-buttons">
                        <button type="button" id="acceptSuggestion" class="btn-press suggestion-btn-accept">
                            Use This
                        </button>
                        <button type="button" id="dismissSuggestion" class="suggestion-btn-dismiss">
                            Dismiss
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="btn-row">
                <button id="calculate" class="btn-press btn-primary-wide">Compute Fire Mission</button>
                <button id="reset" class="btn-press btn-secondary-flex">Reset</button>
                <button id="shareBtn" class="btn-press btn-share">üì§ Share</button>
            </div>
        </div>
        
        <div id="output" class="result"></div>
        
        <!-- Fire for Effect Container -->
        <div id="ffeContainer" class="ffe-container cls-hidden">
            <!-- FFE Mode Toggle -->
            <div id="ffeToggleContainer" class="ffe-form-group">
                <label class="ffe-toggle-label">
                    <input type="checkbox" id="ffeEnabled">
                    <span>üí• Enable Fire for Effect Pattern</span>
                </label>
            </div>
            
            <!-- Fire for Effect Widget (Dynamic) -->
            <div id="ffeWidget" class="ffe-widget" style="display: none;">
                <h3>üí• Fire for Effect Pattern</h3>
                
                <div class="info info-ffe mb-12">
                    üéØ Generate multi-round salvo patterns. <strong>Lateral sheaf</strong> for width coverage, <strong>linear sheaf</strong> for depth penetration, <strong>circular pattern</strong> for 360¬∞ saturation.
                </div>
                
                <div class="ffe-form-grid">
                    <div class="ffe-form-group">
                        <label for="ffePattern">Sheaf Type</label>
                        <select id="ffePattern" class="ffe-select">
                            <option value="perpendicular">Lateral Sheaf (Width)</option>
                            <option value="along-bearing">Linear Sheaf (Depth)</option>
                            <option value="circular">Circular Pattern</option>
                        </select>
                    </div>
                    <div class="ffe-form-group">
                        <label for="ffeRounds">Rounds per Salvo</label>
                        <select id="ffeRounds" class="ffe-select">
                            <option value="3">3 Rounds</option>
                            <option value="4">4 Rounds</option>
                            <option value="5" selected>5 Rounds</option>
                            <option value="6">6 Rounds</option>
                            <option value="7">7 Rounds</option>
                            <option value="8">8 Rounds</option>
                            <option value="9">9 Rounds</option>
                            <option value="10">10 Rounds</option>
                            <option value="11">11 Rounds</option>
                            <option value="12">12 Rounds</option>
                        </select>
                    </div>
                </div>
                
                <div id="ffeSpacingGroup" class="ffe-form-group">
                    <label for="ffeSpacing">Round Interval (meters)</label>
                    <input type="number" id="ffeSpacing" class="ffe-input" placeholder="50" value="50" min="10" max="500" step="10">
                    <small>Spacing between impact points (10-500m)</small>
                </div>
                
                <div id="ffeRadiusGroup" class="ffe-form-group" style="display: none;">
                    <label for="ffeRadius">Circle Radius (meters)</label>
                    <input type="number" id="ffeRadius" class="ffe-input" placeholder="100" value="100" min="20" max="500" step="10">
                    <small>Distance from center to impact points (20-500m)</small>
                </div>
                
                <button id="generateFFE" class="btn-press ffe-btn">
                    Generate FFE Pattern
                </button>
                
                <button id="showBaseSolution" class="btn-press ffe-btn-secondary" style="display: none;">
                    ‚Üê Show Base Solution
                </button>
            </div>
        </div>
        
        <!-- Fire Correction Widget (Static) -->
        <div id="fireCorrectionWidget" class="correction-widget cls-hidden">
            <h3 id="fireCorrectionHeader">üîÑ Adjust Fire: Gun-Target (GT) line</h3>
            <div>
                
                <!-- FO Mode Toggle -->
                <div class="mb-12">
                    <div class="correction-toggle">
                        <input type="checkbox" id="foEnabled">
                        <span id="foToggleLabel">üî≠ Use Observer-Target (OT) line</span>
                    </div>
                </div>
                
                <!-- Observer Position Inputs -->
                <div id="foControls" class="correction-fo-controls cls-hidden">
                    <div id="observerGridMode" class="coord-mode">
                        <div class="correction-form-grid correction-grid-sm">
                            <div>
                                <label class="observer-label">FO Grid X</label>
                                <input type="text" id="observerGridX" placeholder="060" maxlength="4" inputmode="numeric" pattern="[0-9]*" class="observer-input observer-input-grid" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                            <div>
                                <label class="observer-label">FO Grid Y</label>
                                <input type="text" id="observerGridY" placeholder="080" maxlength="4" inputmode="numeric" pattern="[0-9]*" class="observer-input observer-input-grid" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                        </div>
                    </div>
                    
                    <div id="observerMetersMode" class="coord-mode">
                        <div class="correction-form-grid correction-grid-sm">
                            <div>
                                <label class="observer-label">FO X (meters)</label>
                                <input type="number" id="observerX" placeholder="6000" step="0.1" min="0" max="99999.9" class="observer-input" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                            <div>
                                <label class="observer-label">FO Y (meters)</label>
                                <input type="number" id="observerY" placeholder="8000" step="0.1" min="0" max="99999.9" class="observer-input" onkeydown="if(event.key === 'Enter') event.preventDefault();">
                            </div>
                        </div>
                    </div>
                    
                    <div id="otBearingDisplay" class="correction-bearing-display" style="display: none;">
                        üß≠ <strong>OT:</strong> <span id="otBearingValue">-</span>¬∞ | <strong>GT:</strong> <span id="gtBearingValue">-</span>¬∞ | <strong>Œî:</strong> <span id="angleDiffValue">-</span>¬∞
                    </div>
                    <div id="observerWarning" class="correction-warning cls-hidden">
                        ‚ö†Ô∏è Please enter observer coordinates to use OT mode
                    </div>
                </div>
                
                <div class="correction-form-grid">
                    <div class="correction-form-group">
                        <label for="correctionLR">Left/Right (meters)</label>
                        <input type="text" inputmode="text" id="correctionLR" class="correction-input" data-min="-500" data-max="500" onkeydown="if(event.key === 'Enter') event.preventDefault();" oninput="this.value = this.value.replace(/[^0-9\-+]/g, '').replace(/(?!^)[\-+]/g, '');">
                        <small>Right: +, Left: ‚àí (Range: -500 to +500m)</small>
                    </div>
                    <div class="correction-form-group">
                        <label for="correctionAD">Add/Drop (meters)</label>
                        <input type="text" inputmode="text" id="correctionAD" class="correction-input" data-min="-500" data-max="500" onkeydown="if(event.key === 'Enter') event.preventDefault();" oninput="this.value = this.value.replace(/[^0-9\-+]/g, '').replace(/(?!^)[\-+]/g, '');">
                        <small>Add: +, Drop: ‚àí (Range: -500 to +500m)</small>
                    </div>
                </div>
                <button id="applyCorrection" class="correction-btn" disabled>
                    Apply Fire Correction
                </button>
                <button id="undoCorrection" class="btn-press correction-btn-undo" style="display: none;">
                    ‚Ü∂ Undo Correction - Restore Original Target
                </button>
            </div>
        </div>
    </div>
    
    </main>
    
    <!-- Share Session Modal -->
    <div id="shareModal" class="share-modal-overlay">
        <div class="share-modal">
            <!-- Modal Header -->
            <div class="share-modal-header">
                <h2>üì§ Share Fire Mission</h2>
                <button id="closeShareModalBtn" class="btn-press share-modal-close">‚úï</button>
            </div>
            
            <!-- Modal Body -->
            <div class="share-modal-body">
                <!-- Error Message Container -->
                <div id="shareErrorMessage" class="share-modal-error cls-hidden"></div>
                
                <!-- Share Link Section -->
                <div id="shareLinkSection" class="share-modal-section mb-25" style="display: none;">
                    <h3>Share Link</h3>
                    <p>Copy this link and send it to your squad. Anyone with the link can load this fire mission.</p>
                    
                    <div class="share-modal-input-group">
                        <input type="text" id="shareURLField" class="share-modal-input" readonly placeholder="Share URL will appear here...">
                        <button id="copyURLBtn" class="btn-press btn-copy">üìã Copy</button>
                    </div>
                </div>
                
                <div id="shareDivider" class="share-modal-divider cls-hidden"></div>
                
                <!-- Load from Paste Section -->
                <div class="share-modal-section">
                    <h3>Load Shared Mission</h3>
                    <p>Paste a share link or JSON data to load a fire mission from a squad member.</p>
                    
                    <textarea id="sharePasteField" class="share-modal-textarea" placeholder="Paste share link or JSON data here..."></textarea>
                    
                    <button id="loadPasteBtn" class="btn-press w-full">
                        ‚¨á Load Mission
                    </button>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="share-modal-footer">
                <button id="closeShareModalBtn2" class="btn-press share-modal-footer-btn">
                    Close
                </button>
            </div>
        </div>
    </div>
    
    <!-- Footer - Outside main and app containers to ensure visibility at all times -->
    <footer class="footer">
        <p>
            <a href="https://github.com/GeNeFRAG/ArmaReforger/issues/new?labels=bug&title=%5BBUG%5D%20&body=%23%23%20What%27s%20broken%3F%0A%0A%0A%23%23%20How%20did%20it%20happen%3F%0A1.%20%0A2.%20%0A3.%20%0A%0A%23%23%20What%20weapon%2Fmap%20were%20you%20using%3F%0A" 
               target="_blank" 
               rel="noopener noreferrer" 
               class="bug-report-btn">
                üêõ Report Bug
            </a>
        </p>
        <p>¬© 2026 ArmaMortars.org | OpenSource Arma Reforger Ballistic Calculator v2.9.0</p>
        <p>
            <a href="https://github.com/GeNeFRAG/ArmaReforger/tree/main/mortar_core/" target="_blank" rel="noopener noreferrer">‚≠ê View on GitHub</a>
            | 
            <a href="https://github.com/GeNeFRAG/ArmaReforger/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">üìÑ MIT License</a>
        </p>
        <p>
            <a href="http://discord.gg/Gb8Nt92J3m" target="_blank" rel="noopener noreferrer" class="footer-discord"><img src="FIST_Discord.webp" alt="F.I.S.T Discord" width="16" height="16">F.I.S.T Discord</a>
        </p>
    </footer>
    
    <script src="BallisticCalculator.js?v=2.8.0"></script>
    <script type="module" src="ui_js/main.js"></script>
</body>
</html>
